---
id: "browse"
---

extends ../_layouts/_master.pug

block content
    

    #map-prompt
        .buttons.has-addons.is-centered

            span.button(@click="handleShowList" v-bind:class="show_map ? '' : 'is-info is-selected'")
                span.icon
                    i.fas.fa-list
                span List
            span.button(@click="handleShowMap" v-bind:class="show_map ? 'is-info is-selected' : ''")
                span.icon
                    i.fas.fa-map
                span Map




    div(v-if="!page_loading" v-cloak)


        // map is empty by default - only certain pages will fill this region
        #map(v-bind:style="'visibility:'  + (show_map ? 'visible' : 'hidden')")

        // markers view
        #markers-view(v-if="!show_map")
            
            #markers

                p(v-if="!filtered_markers.length" ) No items have been reported to match your search yet. Please check back soon.

                div(v-if="filtered_markers.length")

                    .panel(v-bind:data-id="marker._id" v-for="marker in m_docs" v-if="filtered_markers.indexOf(marker._id) != -1")
                        
                        .panel-heading(@click="handleMarkerSelect(marker)")
                            .distance {{ getDistanceFromMarker(marker) }}
                            h3 {{ marker.title }}

                        .panel-block(@click="handleMarkerSelect(marker)")

                            .category(v-for="item in i_docs" v-if="item.parent && item.parent == marker._id && item.category[0]" @click="handleItemSelect(item, marker)" v-bind:data-id="item._id")

                                span.icon.is-large(v-bind:style="makeCategoryStyle(getCategory(item.category))") 
                                    i(v-bind:class="makeCategoryIconClass(getCategory(item.category))")



block styles
    link(rel="stylesheet" type="text/css" href="/lib/map.css")
    link(rel="stylesheet" type="text/css" href="/browse/browse.css")

block scripts
    script(src="/lib/map.js")
    script(src="/browse/browse.js")
